<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="../img/logo.png" type="image/x-icon" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/nav.css" />
    <link rel="stylesheet" href="../css/mobile.css" />
    <link rel="stylesheet" href="../css/subnav.css" />
    <link rel="stylesheet" href="css/style.css" />
    <title>E.Carrechan</title>
  </head>

  <body>
    <header>
      <div class="logo-container">
        <a href="../index.html" class="logo-container">
          <img src="../img/logo.png" alt="Logo" class="logo" />
          <h1 id="company-name">
            <span class="r">E</span>
            <span class="v">.</span>
            <span class="b">Carre</span>
            <span class="v">chan</span>
          </h1>
        </a>
      </div>

      <input type="checkbox" id="nav-toggle" aria-hidden="true" />
      <label for="nav-toggle" class="hamburger" aria-label="Ouvrir le menu">
        <span></span>
      </label>

      <nav>
        <ul class="nav">
          <li class="infobulle">
            <a href="../algorithmes/index.html" class="active">Algorithmes</a>
          </li>
          <li class="infobulle">
            <a href="../fonctionnalites/index.html">Fonctionnalités</a>
          </li>
          <li class="infobulle">
            <a href="../difficultes/index.html">Difficultés</a>
          </li>
          <li class="infobulle">
            <a href="../conclusion/index.html">Conclusion</a>
          </li>
          <li class="infobulle">
            <a href="../mission/index.html">Missions</a>
          </li>
        </ul>
      </nav>
    </header>

    <main>
      <div class="description">
        <h2>Gestion du personnel</h2>
      </div>

      <div class="subnav-contour">
        <nav class="sub-nav">
          <ul>
            <li><a href="index.html">⬅</a></li>
            <li><a href="LectureCSV.html">Lecture CSV</a></li>
            <li><a href="GestionStock.html">Gestion Stock</a></li>
            <li>
              <a href="GestionPersonnel.html" class="active"
                >Gestion Personnel</a
              >
            </li>
            <li><a href="ServiceClient.html">Service Client</a></li>
            <li><a href="Comptabilite.html">Comptabilité</a></li>
          </ul>
        </nav>
      </div>

      <section class="code">
        <h3>Fonctionnement</h3>
        <pre>
          <code>
            void lire_personne(char noms[][MAX_TEXTE],
                   char villes[][MAX_TEXTE],
                   char genres[],
                   int *nb_personnes)
{
    char ligne[512];
    *nb_personnes = 0;

   
    if (!fgets(ligne, sizeof(ligne), stdin))
        return;

   
    while (fgets(ligne, sizeof(ligne), stdin)) {
        ligne[strcspn(ligne, "\r\n")] = '\0';
        if (strlen(ligne) == 0) continue; 

        char *token;
        char valeurs[8][MAX_TEXTE] = {{0}};
        int champ = 0;

        
        token = strtok(ligne, ";");
        while (token != NULL && champ < 8) {
            strncpy(valeurs[champ], token, MAX_TEXTE - 1);
            token = strtok(NULL, ";");
            champ++;
        }

      
        if (champ < 8) continue;

        
        strcpy(noms[*nb_personnes], valeurs[1]);
        genres[*nb_personnes] = valeurs[3][0];
        strcpy(villes[*nb_personnes], valeurs[7]);

        (*nb_personnes)++;
    }
}
          </code>
        </pre>
        <p>
          La fonction lire_personne lit les données des employés à partir d'un
          flux d'entrée, extrait les informations pertinentes et les stocke dans
          des tableaux pour une utilisation ultérieure.
        </p>
      </section>

      <section class="code">
        <pre>
          <code>
            void genre(char genres[], int nb_personnes)
{
    int nb_hommes = 0, nb_femmes = 0;

    for (int i = 0; i < nb_personnes; i++) {
        if (genres[i] == 'M' || genres[i] == 'm') nb_hommes++;
        else if (genres[i] == 'F' || genres[i] == 'f') nb_femmes++;
    }

    printf("Le nombre d'hommes est de %d et le nombre de femmes est de %d.\n",
           nb_hommes, nb_femmes);
}
          </code>
        </pre>
        <p>
          La fonction genre compte et affiche le nombre d'hommes et de femmes
          parmi les employés.
        </p>
      </section>
      <section class="code">
        <pre>
          <code>
            void covoiturage(char noms[][MAX_TEXTE],
                 char villes[][MAX_TEXTE],
                 int nb_personnes)
{
    int deja_affiche[MAX_LIGNES] = {0};

    printf("\nVilles avec covoitureurs (possible):\n");

    for (int i = 0; i < nb_personnes; i++) {
        if (deja_affiche[i]) continue;

        
        int compte = 0;
        for (int k = i; k < nb_personnes; k++) {
            if (strcmp(villes[i], villes[k]) == 0) compte++;
        }

        if (compte >= 2) {
           
            for (int k = i; k < nb_personnes; k++) {
                if (strcmp(villes[i], villes[k]) == 0) deja_affiche[k] = 1;
            }

            printf("Ville: %s | covoitureurs: ", villes[i]);
            for (int k = 0; k < nb_personnes; k++) {
                if (strcmp(villes[i], villes[k]) == 0) {
                    printf("%s", noms[k]);
                    
                    int encore = 0;
                    for (int t = k + 1; t < nb_personnes; t++)
                        if (strcmp(villes[i], villes[t]) == 0) { encore = 1; break; }
                    if (encore) printf(", ");
                }
            }
            printf("\n");
        }
    }
}
          </code>
        </pre>
        <p>
          La fonction covoiturage identifie les employés vivant dans la même
          ville et affiche leurs noms pour faciliter l'organisation du
          covoiturage.
        </p>
      </section>
    </main>
  </body>
</html>
